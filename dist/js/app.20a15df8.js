(function(t){function e(e){for(var i,s,r=e[0],c=e[1],l=e[2],d=0,f=[];d<r.length;d++)s=r[d],o[s]&&f.push(o[s][0]),o[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(f.length)f.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(i=!1)}i&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},o={app:0},a=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/Vue-Player/dist/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"01ae":function(t,e,n){},"052b":function(t,e,n){"use strict";var i=n("a2f4"),o=n.n(i);o.a},"0af1":function(t,e,n){},"1dc3":function(t,e,n){"use strict";var i=n("1ede"),o=n.n(i);o.a},"1ede":function(t,e,n){},"331a":function(t,e,n){},"41ce":function(t,e,n){"use strict";var i=n("b7e6"),o=n.n(i);o.a},"551a":function(t,e,n){},5757:function(t,e,n){},"5f57":function(t,e,n){},"603b":function(t,e,n){"use strict";var i=n("6535"),o=n.n(i);o.a},6535:function(t,e,n){},"749a":function(t,e,n){"use strict";var i=n("01ae"),o=n.n(i);o.a},"7c47":function(t,e,n){"use strict";var i=n("551a"),o=n.n(i);o.a},"7faf":function(t,e,n){"use strict";var i=n("0af1"),o=n.n(i);o.a},8616:function(t,e,n){"use strict";var i=n("c485"),o=n.n(i);o.a},8830:function(t,e,n){"use strict";var i=n("a6b6"),o=n.n(i);o.a},"8db2":function(t,e,n){},9250:function(t,e,n){"use strict";var i=n("5757"),o=n.n(i);o.a},a2f4:function(t,e,n){},a6b6:function(t,e,n){},ab15:function(t,e,n){},b7e6:function(t,e,n){},c485:function(t,e,n){},c680:function(t,e,n){"use strict";var i=n("ab15"),o=n.n(i);o.a},cd49:function(t,e,n){"use strict";n.r(e);var i=n("2b0e"),o=n("0284"),a=n.n(o),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t._f("bemMods")(t.blockName,{theme:"dark"}),attrs:{id:"app"},on:{dragenter:function(e){return e.preventDefault(),t.pass(e)},dragleave:function(e){return e.preventDefault(),t.pass(e)},dragover:function(e){return e.preventDefault(),t.pass(e)},dragend:function(e){return e.preventDefault(),t.pass(e)},drop:function(e){return e.preventDefault(),t.pass(e)}}},[n("Layout",[n("template",{slot:"header"},[n("Header")],1),n("router-view"),n("template",{slot:"footer"},[n("Footer")],1)],2)],1)},r=[],c=n("9ab4"),l=n("60a3"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t._f("bemMods")(t.blockName,t.mods)})},d=[],f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blockName="header",e}var n;return c["d"](e,t),c["c"]([Object(l["b"])({default:function(){return{}}}),c["f"]("design:type","function"===typeof(n="undefined"!==typeof Hash&&Hash)?n:Object)],e.prototype,"mods",void 0),e=c["c"]([l["a"]],e),e}(l["c"]),p=f,h=p,y=(n("9250"),n("2877")),v=Object(y["a"])(h,u,d,!1,null,"89377922",null);v.options.__file="header.vue";var b=v.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t._f("bemMods")(t.blockName,t.mods)})},g=[],k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blockName="footer",e}var n;return c["d"](e,t),c["c"]([Object(l["b"])({default:function(){return{}}}),c["f"]("design:type","function"===typeof(n="undefined"!==typeof Hash&&Hash)?n:Object)],e.prototype,"mods",void 0),e=c["c"]([l["a"]],e),e}(l["c"]),_=k,M=_,O=(n("749a"),Object(y["a"])(M,m,g,!1,null,"c998c5c6",null));O.options.__file="footer.vue";var P=O.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t._f("bemMods")(t.blockName,t.mods)},[n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"track-info"))},[null!=t.currentTrack?[t._v("\n      .:: "+t._s(t._f("duration")(t.currentTrack.duration,"s","MM:SS"))+" ::\n      - "+t._s(t.currentTrack.name)+" ::\n      "+t._s(t.currentTrack.type)+" ::\n      "+t._s(t.currentTrack.sampleRate)+" kHz, "+t._s(t.currentTrack.bitrate)+" kbps, "+t._s(t._f("fileSize")(t.currentTrack.size))+"\n      ::.\n    ")]:t._e()],2),n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"display"))},[t._v("\n    "+t._s(t._f("duration")(t.state.currentSecond,"s","MM:SS"))+"\n    "),null!=t.analyser?n("Visualiser",{attrs:{analyser:t.analyser,isRun:t.isPlaying,width:200,height:30,displayBins:64}}):t._e()],1),n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"progress"))},[n("Progress",{attrs:{cacheProgress:t.cacheProgress,playProgress:t.playProgress},on:{changed:t.seekPercent}})],1),n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"controls"))},[n("Button",{attrs:{icon:t.isPlaying?"pause":"play_arrow",mods:{hover:"size",state:t.currentTrack?"default":"non-active"}},on:{click:t.togglePlay}}),n("Button",{attrs:{icon:"stop",mods:{hover:"size",state:null!=t.currentTrack?"active":"non-active"}},on:{click:t.stop}}),n("Button",{attrs:{icon:"skip_previous",mods:{hover:"size",state:null!=t.state.activePlaylist?"active":"non-active"}},on:{click:t.prev}}),n("Button",{attrs:{icon:"skip_next",mods:{hover:"size",state:null!=t.state.activePlaylist?"active":"non-active"}},on:{click:t.next}}),n("Button",{attrs:{icon:"shuffle",mods:{hover:"size",state:t.state.isShuffle?"active":"non-active"}},on:{click:t.toggleShuffleMode}}),n("Button",{attrs:{icon:t.state.isRepeat>1?"repeat_one":"repeat",mods:{hover:"size",state:t.state.isRepeat>0?"active":"non-active"}},on:{click:t.nextRepeatMode}}),n("Volume",{attrs:{value:t.state.volume},on:{changed:t.updateVolume}})],1)])},T=[],S=n("4bb5"),x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t._f("bemMods")(t.blockName,t.mods)},[n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"header"),t.headerMods)},[t._t("header")],2),n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"body"),t.bodyMods)},[t._t("default")],2),n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"footer"),t.footerMods)},[t._t("footer")],2)])},N=[],E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blockName="layout",e}var n,i,o,a;return c["d"](e,t),c["c"]([Object(l["b"])({default:function(){return{}}}),c["f"]("design:type","function"===typeof(n="undefined"!==typeof Hash&&Hash)?n:Object)],e.prototype,"mods",void 0),c["c"]([Object(l["b"])({default:function(){return{}}}),c["f"]("design:type","function"===typeof(i="undefined"!==typeof Hash&&Hash)?i:Object)],e.prototype,"headerMods",void 0),c["c"]([Object(l["b"])({default:function(){return{}}}),c["f"]("design:type","function"===typeof(o="undefined"!==typeof Hash&&Hash)?o:Object)],e.prototype,"bodyMods",void 0),c["c"]([Object(l["b"])({default:function(){return{}}}),c["f"]("design:type","function"===typeof(a="undefined"!==typeof Hash&&Hash)?a:Object)],e.prototype,"footerMods",void 0),e=c["c"]([l["a"]],e),e}(l["c"]),w=E,L=w,C=(n("41ce"),Object(y["a"])(L,x,N,!1,null,"6d3c4253",null));C.options.__file="layout.vue";var B=C.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("i",{class:t._f("bemMods")(t.blockName,{library:t.library,size:t.size})},[t._v(t._s(t.name))])},H=[],A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blockName="icon",e}var n;return c["d"](e,t),c["c"]([Object(l["b"])({default:function(){return{}}}),c["f"]("design:type","function"===typeof(n="undefined"!==typeof Hash&&Hash)?n:Object)],e.prototype,"mods",void 0),c["c"]([Object(l["b"])({default:function(){return"mdi"}}),c["f"]("design:type",String)],e.prototype,"library",void 0),c["c"]([Object(l["b"])({default:function(){return null}}),c["f"]("design:type",String)],e.prototype,"name",void 0),c["c"]([Object(l["b"])({default:function(){return 24}}),c["f"]("design:type",Number)],e.prototype,"size",void 0),e=c["c"]([l["a"]],e),e}(l["c"]),z=A,R=z,$=(n("603b"),Object(y["a"])(R,D,H,!1,null,"0c3f04d3",null));$.options.__file="icon.vue";var I=$.exports,F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t._f("bemMods")(t.blockName,t.mods),on:{click:function(e){t.$emit("click",e)}}},[t.icon?n("Icon",{attrs:{library:t.iconNS,name:t.icon}}):t._e(),t.label?n("span",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"label"))},[t._v(t._s(t.label))]):t._e()],1)},V=[],q=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blockName="button",e}var n;return c["d"](e,t),c["c"]([Object(l["b"])({default:function(){return{}}}),c["f"]("design:type","function"===typeof(n="undefined"!==typeof Hash&&Hash)?n:Object)],e.prototype,"mods",void 0),c["c"]([Object(l["b"])({default:function(){return"mdi"}}),c["f"]("design:type",String)],e.prototype,"iconNS",void 0),c["c"]([Object(l["b"])({default:function(){return null}}),c["f"]("design:type",String)],e.prototype,"icon",void 0),c["c"]([Object(l["b"])({default:function(){return null}}),c["f"]("design:type",String)],e.prototype,"label",void 0),e=c["c"]([Object(l["a"])({components:{Icon:I}})],e),e}(l["c"]),W=q,U=W,G=(n("8616"),Object(y["a"])(U,F,V,!1,null,"1c92b7d8",null));G.options.__file="button.vue";var J=G.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t._f("bemMods")(t.blockName,t.mods),on:{click:t.click,"&mousedown":function(e){return t.startChanges(e)}}},[n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"back"))}),n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"cache")),style:{width:t.cacheProgress*t.width+"px"}}),n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"front")),style:{width:t.playProgress*t.width+"px"}}),n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"track")),style:{left:t.playProgress*t.width+"px"}})])},K=[],X=n("2ef0"),Q=function(t){return void 0===t&&(t=500),function(e,n,i){return c["a"]({},i,{value:Object(X["throttle"])(i.value,t)})}},Z=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blockName="progress",e.width=0,e.allowChangesOnMouseMove=!1,e}var n;return c["d"](e,t),e.prototype.mounted=function(){this.width=this.$el.offsetWidth,this.mouseMove=this.mouseMove.bind(this),this.stopChanges=this.stopChanges.bind(this)},e.prototype.click=function(t){this.updateValue(t.offsetX/this.width)},e.prototype.startChanges=function(t){window.addEventListener("mousemove",this.mouseMove,{passive:!0}),window.addEventListener("mouseup",this.stopChanges,{passive:!0})},e.prototype.mouseMove=function(t){this.updateValue((t.x-this.$el.getBoundingClientRect().left)/this.width)},e.prototype.stopChanges=function(){window.removeEventListener("mousemove",this.mouseMove)},e.prototype.updateValue=function(t){t<0&&(t=0),this.$emit("changed",t)},c["c"]([Object(l["b"])({default:function(){return{}}}),c["f"]("design:type","function"===typeof(n="undefined"!==typeof Hash&&Hash)?n:Object)],e.prototype,"mods",void 0),c["c"]([Object(l["b"])({default:function(){return 0}}),c["f"]("design:type",Number)],e.prototype,"cacheProgress",void 0),c["c"]([Object(l["b"])({default:function(){return 0}}),c["f"]("design:type",Number)],e.prototype,"playProgress",void 0),c["c"]([Q(32),c["f"]("design:type",Function),c["f"]("design:paramtypes",[Number]),c["f"]("design:returntype",void 0)],e.prototype,"updateValue",null),e=c["c"]([l["a"]],e),e}(l["c"]),tt=Z,et=tt,nt=(n("052b"),Object(y["a"])(et,Y,K,!1,null,"37e77d86",null));nt.options.__file="progress.vue";var it=nt.exports,ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("canvas",{class:t._f("bemMods")(t.blockName,t.mods),attrs:{width:t.width,height:t.height},on:{click:t.changeType}})},at=[],st=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blockName="visualiser",e.ctx=null,e.drawCurved=!1,e.drawFilled=!1,e.binWidth=0,e.logLookupTable=null,e.logBinLengths=null,e.finalBins=null,e.oneMoreSecond=60,e}var n,i;return c["d"](e,t),e.prototype.mounted=function(){this.init()},e.prototype.init=function(){this.ctx=this.$el.getContext("2d"),this.ctx.strokeStyle="#EC1A55",this.finalBins=new Array(this.displayBins),this.binWidth=Math.ceil(this.width/(this.displayBins-1)),this.analyser.fftSize=2*this.displayBins,this.logLookupTable=[],this.logBinLengths=[];for(var t=0;t<this.displayBins;t++)this.logLookupTable.push(t);requestAnimationFrame(this.paint.bind(this))},e.prototype.paint=function(){this.isRun?requestAnimationFrame(this.paint.bind(this)):this.oneMoreSecond>0&&(this.oneMoreSecond--,requestAnimationFrame(this.paint.bind(this))),this.ctx.fillStyle="hsla(0, 0%, 0%, 1)",this.ctx.fillRect(0,0,this.width,this.height),this.ctx.globalCompositeOperation="destination-out",this.ctx.fillStyle="hsla(0, 0%, 0%, 1)",this.ctx.fillRect(0,0,this.width,this.height),this.ctx.globalCompositeOperation="source-over";var t=this.analyser.frequencyBinCount,e=new Uint8Array(t);if(this.analyser.getByteFrequencyData(e),this.ctx.fillStyle="#EC1A55",this.updateBins(t,this.logBinLengths,e),this.drawCurved){this.ctx.fillStyle="#EC1A55",this.ctx.beginPath(),this.ctx.moveTo(0,this.height-this.getBinHeight(0));c=void 0;for(c=0;c<this.displayBins-2;){var n=c*this.binWidth,i=(c+this.logBinLengths[c])*this.binWidth,o=(n+i)/2,a=this.height-this.getBinHeight(c),s=this.height-this.getBinHeight(c+this.logBinLengths[c]),r=(a+s)/2;this.ctx.quadraticCurveTo(n,a,o,r),c+=this.logBinLengths[c]}this.ctx.quadraticCurveTo(c*this.binWidth,this.height-this.getBinHeight(c),(c+1)*this.binWidth,this.height-this.getBinHeight(c+1)),this.drawFilled?(this.ctx.lineTo(this.width,this.height),this.ctx.lineTo(0,this.height),this.ctx.fill()):this.ctx.stroke()}else for(var c=0;c<this.displayBins;c++)this.paintSingleBin(c)},e.prototype.averageRegion=function(t,e,n){if(n<=e)return t[e];for(var i=0,o=e;o<n;o++)i+=t[o];return i/(n-e)},e.prototype.updateBins=function(t,e,n){for(var i=t/this.displayBins,o=0;o<this.displayBins;o++){var a=this.averageRegion(n,o*i,(o+1)*i-1);e.push(1),this.finalBins[o]=a}},e.prototype.getBinHeight=function(t){var e=this.finalBins[t];return null==e||0===e?1:e/255*this.height*.9},e.prototype.paintSingleBin=function(t){var e=this.getBinHeight(t);this.ctx.fillRect(t*this.binWidth+1,this.height-e,this.binWidth-1,e)},e.prototype.changeType=function(){this.drawCurved=!this.drawCurved},e.prototype.onIsRunChange=function(){this.isRun&&(this.oneMoreSecond=60,requestAnimationFrame(this.paint.bind(this)))},c["c"]([Object(l["b"])({default:function(){return{}}}),c["f"]("design:type","function"===typeof(n="undefined"!==typeof Hash&&Hash)?n:Object)],e.prototype,"mods",void 0),c["c"]([Object(l["b"])({default:function(){return null},required:!0}),c["f"]("design:type","function"===typeof(i="undefined"!==typeof AnalyserNode&&AnalyserNode)?i:Object)],e.prototype,"analyser",void 0),c["c"]([Object(l["b"])({default:function(){return!1}}),c["f"]("design:type",Boolean)],e.prototype,"isRun",void 0),c["c"]([Object(l["b"])({default:function(){return 100}}),c["f"]("design:type",Number)],e.prototype,"width",void 0),c["c"]([Object(l["b"])({default:function(){return 50}}),c["f"]("design:type",Number)],e.prototype,"height",void 0),c["c"]([Object(l["b"])({default:function(){return 32}}),c["f"]("design:type",Number)],e.prototype,"displayBins",void 0),c["c"]([Object(l["d"])("isRun"),c["f"]("design:type",Function),c["f"]("design:paramtypes",[]),c["f"]("design:returntype",void 0)],e.prototype,"onIsRunChange",null),e=c["c"]([l["a"]],e),e}(l["c"]),rt=st,ct=rt,lt=(n("8830"),Object(y["a"])(ct,ot,at,!1,null,"0f401e89",null));lt.options.__file="visualiser.vue";var ut=lt.exports,dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t._f("bemMods")(t.blockName,t.mods)},[n("Button",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"icon")),attrs:{icon:t.icon,mods:{hover:"size"}},on:{click:t.toggleMute}}),n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"front")),on:{mousemove:t.change,mouseout:t.stopChanges}},[n("Button",{attrs:{icon:t.icon},on:{click:t.toggleMute}}),n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"range")),on:{click:t.click,mousedown:t.startChanges,mouseup:t.stopChanges}},[n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"track")),style:{top:t.value*t.height+"px"}})])],1)],1)},ft=[],pt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blockName="volume",e.height=100,e.changeVolumeDynamicly=!1,e.mute=0,e.icon="volume_up",e}var n;return c["d"](e,t),e.prototype.onValueChanged=function(t,e){this.icon=0===t?"volume_off":t<=.3?"volume_mute":.3<t&&t<=.6?"volume_down":"volume_up"},e.prototype.click=function(t){this.$emit("changed",Number((t.offsetY/this.height).toFixed(2)))},e.prototype.change=function(t){this.changeVolumeDynamicly&&this.$emit("changed",Number((t.offsetY/this.height).toFixed(2)))},e.prototype.startChanges=function(t){this.changeVolumeDynamicly=!0},e.prototype.stopChanges=function(t){this.changeVolumeDynamicly=!1},e.prototype.toggleMute=function(t){0===this.mute?(this.mute=this.value,this.$emit("changed",0)):(this.$emit("changed",this.mute),this.mute=0)},c["c"]([Object(l["b"])({default:function(){return{}}}),c["f"]("design:type","function"===typeof(n="undefined"!==typeof Hash&&Hash)?n:Object)],e.prototype,"mods",void 0),c["c"]([Object(l["b"])({default:function(){return 1}}),c["f"]("design:type",Number)],e.prototype,"value",void 0),c["c"]([Object(l["d"])("value"),c["f"]("design:type",Function),c["f"]("design:paramtypes",[Number,Number]),c["f"]("design:returntype",void 0)],e.prototype,"onValueChanged",null),e=c["c"]([Object(l["a"])({components:{Button:J}})],e),e}(l["c"]),ht=pt,yt=ht,vt=(n("7c47"),Object(y["a"])(yt,dt,ft,!1,null,"b2a513ce",null));vt.options.__file="volume.vue";var bt=vt.exports,mt=function(){for(var t="",e=0;e<32;++e){8!==e&&12!==e&&16!==e&&20!==e||(t+="-");var n=16*Math.random()|0;t+=(12===e?4:16===e?3&n|8:n).toString(16)}return t},gt=function(t,e){return void 0===e&&(e={}),new Promise(function(n,i){t(c["a"]({},e,{defer:{resolve:n,reject:i}}))})},kt=function(t,e,n){for(var i=t,o=0,a=e.split(".");o<a.length;o++){var s=a[o];if(null==i[s])return n;i=i[s]}return i},_t=function(t,e){return Math.floor(Math.random()*(e-t))+t},Mt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blockName="player",e.cacheProgress=0,e.isPlaying=!1,e.audio=null,e.ctx=null,e.analyser=null,e.scriptProcessor=null,e.gainNode=null,e.source=null,e}var n,i,o,a,s,r,u,d,f,p,h,y,v,b,m,g,k;return c["d"](e,t),Object.defineProperty(e.prototype,"playProgress",{get:function(){if(null==this.currentTrack)return 0;try{var t=this.state.currentSecond/this.currentTrack.duration;return isNaN(t)?0:t}catch(t){return 0}},enumerable:!0,configurable:!0}),e.prototype.onVolumeChange=function(t){this.audio.volume=t},e.prototype.onStatusChange=function(t){this.isPlaying="isPlaying"===t},e.prototype.onTrackChange=function(){null!=this.currentTrack?(this.audio.src=this.currentTrack.source,this.play()):this.stop()},e.prototype.created=function(){this.onTimeUpdate=this.onTimeUpdate.bind(this),this.onAudioEnd=this.onAudioEnd.bind(this)},e.prototype.mounted=function(){return c["b"](this,void 0,void 0,function(){var t,e;return c["e"](this,function(n){switch(n.label){case 0:return this.initAudio(),e=Object.values(this.playlists).pop(),e?[3,2]:[4,gt(this.createPlaylist,{title:"default"})];case 1:e=n.sent(),n.label=2;case 2:return t=e,null==this.state.activePlaylist&&this.updateActivePlaylist(t),[2]}})})},e.prototype.initAudio=function(){this.audio=document.createElement("audio"),this.audio.preload="metadata",this.ctx=new AudioContext,this.source=this.ctx.createMediaElementSource(this.audio),this.scriptProcessor=this.ctx.createScriptProcessor(16384,1,1),this.gainNode=this.ctx.createGain(),this.analyser=this.ctx.createAnalyser(),this.source.connect(this.analyser),this.analyser.connect(this.scriptProcessor),this.scriptProcessor.connect(this.ctx.destination),this.source.connect(this.ctx.destination),this.audio.addEventListener("timeupdate",this.onTimeUpdate),this.audio.addEventListener("ended",this.onAudioEnd),null!=this.currentTrack&&(this.audio.src=this.currentTrack.source,this.audio.currentTime=this.state.currentSecond)},e.prototype.onTimeUpdate=function(t){var e=Math.round(this.audio.currentTime);this.state.currentSecond!==e&&this.playingTick(e)},e.prototype.onAudioEnd=function(t){return c["b"](this,void 0,void 0,function(){return c["e"](this,function(t){return 2===this.state.isRepeat?(this.audio.currentTime=0,this.play()):this.next(),[2]})})},e.prototype.play=function(){return c["b"](this,void 0,void 0,function(){return c["e"](this,function(t){return"suspended"===this.ctx.state&&this.ctx.resume(),null!=this.audio.src&&(this.audio.play(),"isPlaying"!==this.state.status&&this.updateState("isPlaying")),[2]})})},e.prototype.togglePlay=function(){return c["b"](this,void 0,void 0,function(){return c["e"](this,function(t){return null==this.currentTrack?[2]:(this.isPlaying?(this.audio.pause(),this.updateState("isPaused")):this.play(),[2])})})},e.prototype.stop=function(){this.audio.pause(),this.updateState("isStopped"),this.audio.currentTime=0},e.prototype.seekPercent=function(t){null!=this.currentTrack&&(this.audio.currentTime=t*this.currentTrack.duration)},e.prototype.next=function(){return c["b"](this,void 0,void 0,function(){var t;return c["e"](this,function(e){switch(e.label){case 0:return null==this.state.activePlaylist?[2]:[4,gt(this.getNextTrack,{id:this.state.activePlaylist.id,isRepeatList:1===this.state.isRepeat,isRandom:this.state.isShuffle})];case 1:return t=e.sent(),null==t?this.stop():"isPlaying"===this.state.status&&(this.audio.src=t.source,this.audio.play()),[2]}})})},e.prototype.prev=function(){return c["b"](this,void 0,void 0,function(){var t;return c["e"](this,function(e){switch(e.label){case 0:return null==this.state.activePlaylist?[2]:[4,gt(this.getPrevTrack,{id:this.state.activePlaylist.id,isRepeatList:1===this.state.isRepeat,isRandom:this.state.isShuffle})];case 1:return t=e.sent(),"isPlaying"===this.state.status&&(this.audio.src=t.source,this.audio.play()),[2]}})})},c["c"]([Object(l["b"])({default:function(){return{}}}),c["f"]("design:type","function"===typeof(n="undefined"!==typeof Hash&&Hash)?n:Object)],e.prototype,"mods",void 0),c["c"]([Object(S["d"])("player"),c["f"]("design:type","function"===typeof(i="undefined"!==typeof IPlayerData&&IPlayerData)?i:Object)],e.prototype,"state",void 0),c["c"]([Object(S["d"])("playlists"),c["f"]("design:type","function"===typeof(o="undefined"!==typeof IPlaylistCollection&&IPlaylistCollection)?o:Object)],e.prototype,"playlists",void 0),c["c"]([Object(S["b"])("Player::currentTrack"),c["f"]("design:type","function"===typeof(a="undefined"!==typeof ITrackData&&ITrackData)?a:Object)],e.prototype,"currentTrack",void 0),c["c"]([Object(S["c"])("updateActivePlaylist"),c["f"]("design:type","function"===typeof(s="undefined"!==typeof MutationMethod&&MutationMethod)?s:Object)],e.prototype,"updateActivePlaylist",void 0),c["c"]([Object(S["c"])("updateState"),c["f"]("design:type","function"===typeof(r="undefined"!==typeof MutationMethod&&MutationMethod)?r:Object)],e.prototype,"updateState",void 0),c["c"]([Object(S["c"])("playingTick"),c["f"]("design:type","function"===typeof(u="undefined"!==typeof MutationMethod&&MutationMethod)?u:Object)],e.prototype,"playingTick",void 0),c["c"]([Object(S["c"])("updateVolume"),c["f"]("design:type","function"===typeof(d="undefined"!==typeof MutationMethod&&MutationMethod)?d:Object)],e.prototype,"updateVolume",void 0),c["c"]([Object(S["c"])("nextRepeatMode"),c["f"]("design:type","function"===typeof(f="undefined"!==typeof MutationMethod&&MutationMethod)?f:Object)],e.prototype,"nextRepeatMode",void 0),c["c"]([Object(S["c"])("toggleShuffleMode"),c["f"]("design:type","function"===typeof(p="undefined"!==typeof MutationMethod&&MutationMethod)?p:Object)],e.prototype,"toggleShuffleMode",void 0),c["c"]([Object(S["c"])("patchTrack"),c["f"]("design:type","function"===typeof(h="undefined"!==typeof MutationMethod&&MutationMethod)?h:Object)],e.prototype,"patchTrack",void 0),c["c"]([Object(S["c"])("createPlaylist"),c["f"]("design:type","function"===typeof(y="undefined"!==typeof MutationMethod&&MutationMethod)?y:Object)],e.prototype,"createPlaylist",void 0),c["c"]([Object(S["c"])("addTracksToPlaylist"),c["f"]("design:type","function"===typeof(v="undefined"!==typeof MutationMethod&&MutationMethod)?v:Object)],e.prototype,"addTracksToPlaylist",void 0),c["c"]([Object(S["c"])("getNextTrack"),c["f"]("design:type","function"===typeof(b="undefined"!==typeof MutationMethod&&MutationMethod)?b:Object)],e.prototype,"getNextTrack",void 0),c["c"]([Object(S["c"])("getPrevTrack"),c["f"]("design:type","function"===typeof(m="undefined"!==typeof MutationMethod&&MutationMethod)?m:Object)],e.prototype,"getPrevTrack",void 0),c["c"]([Object(S["c"])("recalcSizeAndDuration"),c["f"]("design:type","function"===typeof(g="undefined"!==typeof MutationMethod&&MutationMethod)?g:Object)],e.prototype,"recalcSizeAndDuration",void 0),c["c"]([Object(l["d"])("state.volume"),c["f"]("design:type",Function),c["f"]("design:paramtypes",[Number]),c["f"]("design:returntype",void 0)],e.prototype,"onVolumeChange",null),c["c"]([Object(l["d"])("state.status"),c["f"]("design:type",Function),c["f"]("design:paramtypes",["function"===typeof(k="undefined"!==typeof PlayerStatus&&PlayerStatus)?k:Object]),c["f"]("design:returntype",void 0)],e.prototype,"onStatusChange",null),c["c"]([Object(l["d"])("currentTrack"),c["f"]("design:type",Function),c["f"]("design:paramtypes",[]),c["f"]("design:returntype",void 0)],e.prototype,"onTrackChange",null),e=c["c"]([Object(l["a"])({components:{Button:J,Progress:it,Visualiser:ut,Volume:bt}})],e),e}(l["c"]),Ot=Mt,Pt=Ot,jt=(n("fd29"),Object(y["a"])(Pt,j,T,!1,null,"4a795390",null));jt.options.__file="player.vue";var Tt=jt.exports,St=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t._f("bemMods")(t.blockName,t.mods)},[n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"header"))},[n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"total-count"))},[t._v(t._s(t.count))]),n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"total-duration"))},[t._v(t._s(t._f("duration")(t.duration,"s","DD:HH:MM:SS")))]),n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"total-size"))},[t._v(t._s(t._f("fileSize")(t.size)))])]),n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"track-list")),on:{"!dragenter":function(e){return e.preventDefault(),t.trackListDragEnter(e)},dragleave:function(e){return e.preventDefault(),e.target!==e.currentTarget?null:t.trackListDragLeave(e)},"!dragover":function(e){return e.preventDefault(),t.trackListDragOver(e)},"!dragend":function(e){return e.preventDefault(),t.trackListDragEnd(e)},"!drop":function(e){return e.preventDefault(),t.trackListDrop(e)}}},[null!=t.model?t._l(t.tracks,function(e,i){return n("Track",{key:e.data.id,class:t._f("bemMods")(t._f("bemElement")(t.blockName,"track-item")),attrs:{index:i+1,model:e.data,mods:{state:null!=t.currentTrack&&t.currentTrack.id===e.data.id?"active":"default"}},on:{click:function(n){t.selectTrack(e)},delete:function(n){t.removeTrack(e)}}})}):t._e()],2),n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"footer"))},[n("Button",{attrs:{icon:"add",mods:{hover:"size"}},on:{click:t.load}})],1)])},xt=[],Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return null!=t.model?n("div",{class:t._f("bemMods")(t.blockName,t.mods),on:{click:t.onClick}},["active"===t.mods.state?n("span",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"background"))}):t._e(),n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"index"))},[t._v(t._s(t.index)+".")]),n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"title"))},[null!=t.model.author?[t._v("\n      "+t._s(t.model.author)+" - \n    ")]:t._e(),t._v("\n    "+t._s(t.model.name)+"\n  ")],2),n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"duration"))},[t._v(t._s(t._f("duration")(t.model.duration,"s","MM:SS")))]),n("Button",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"delete")),attrs:{icon:"close",mods:{hover:"size"}},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.onDelete(e)}}}),n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"info"))},[t._v("\n    "+t._s(t.model.type)+" :: "+t._s(t.model.sampleRate)+" kHz, "+t._s(t.model.bitrate)+" kbps, "+t._s(t._f("fileSize")(t.model.size))+"\n  ")])],1):t._e()},Et=[],wt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blockName="track",e}var n,i;return c["d"](e,t),e.prototype.onClick=function(){this.$emit("click")},e.prototype.onDelete=function(){this.$emit("delete")},c["c"]([Object(l["b"])({default:-1}),c["f"]("design:type",Number)],e.prototype,"index",void 0),c["c"]([Object(l["b"])({default:null}),c["f"]("design:type","function"===typeof(n="undefined"!==typeof ITrackData&&ITrackData)?n:Object)],e.prototype,"model",void 0),c["c"]([Object(l["b"])({default:function(){return{}}}),c["f"]("design:type","function"===typeof(i="undefined"!==typeof Hash&&Hash)?i:Object)],e.prototype,"mods",void 0),e=c["c"]([Object(l["a"])({components:{Button:J}})],e),e}(l["c"]),Lt=wt,Ct=Lt,Bt=(n("e3db"),Object(y["a"])(Ct,Nt,Et,!1,null,"d892e676",null));Bt.options.__file="track.vue";var Dt=Bt.exports,Ht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blockName="playlist",e}var n,i,o,a,s,r,u,d,f;return c["d"](e,t),Object.defineProperty(e.prototype,"tracks",{get:function(){if(null==this.model.trackList.first)return[];var t=this.model.trackList.first,e=[t];while(null!=t.next)e.push(t.next),t=t.next;return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return null==this.model?0:this.model.count},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return null==this.model?0:this.model.duration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return null==this.model?0:this.model.size},enumerable:!0,configurable:!0}),e.prototype.load=function(){return c["b"](this,void 0,void 0,function(){var t,e,n=this;return c["e"](this,function(i){return t=document.createElement("input"),t.type="file",t.multiple=!0,t.accept="audio/*",e=function(i){return c["b"](n,void 0,void 0,function(){var n,o,a,s,r,l;return c["e"](this,function(c){switch(c.label){case 0:t.removeEventListener("change",e),n=[],o=0,a=Array.from(i.target.files),c.label=1;case 1:return o<a.length?(s=a[o],l=(r=n).push,[4,gt(this.createTrack,{file:s})]):[3,4];case 2:l.apply(r,[c.sent()]),c.label=3;case 3:return o++,[3,1];case 4:return this.addTracksToPlaylist({id:this.model.id,tracks:n}),[2]}})})},t.addEventListener("change",e),t.click(),[2]})})},e.prototype.selectTrack=function(t){null!=this.player.activePlaylist&&this.player.activePlaylist.id!==this.model.id&&this.updateActivePlaylist(this.model),this.updateCursor({id:this.model.id,node:t})},e.prototype.removeTrack=function(t){this.removeTracksFromPlaylist({id:this.model.id,node:t})},e.prototype.trackListDragEnter=function(t){this.$el.querySelector(".playlist__track-list").classList.add("playlist__track-list--drag-ready")},e.prototype.trackListDragLeave=function(t){this.$el.querySelector(".playlist__track-list").classList.remove("playlist__track-list--drag-ready")},e.prototype.trackListDragOver=function(t){},e.prototype.trackListDragEnd=function(t){this.$el.querySelector(".playlist__track-list").classList.remove("playlist__track-list--drag-ready")},e.prototype.trackListDrop=function(t){return c["b"](this,void 0,void 0,function(){var e,n,i,o,a,s;return c["e"](this,function(r){switch(r.label){case 0:this.$el.querySelector(".playlist__track-list").classList.remove("playlist__track-list--drag-ready"),e=[],n=0,i=Array.from(t.dataTransfer.files),r.label=1;case 1:return n<i.length?(o=i[n],/^audio\/.*$/gi.test(o.type)?(s=(a=e).push,[4,gt(this.createTrack,{file:o})]):[3,3]):[3,4];case 2:s.apply(a,[r.sent()]),r.label=3;case 3:return n++,[3,1];case 4:return this.addTracksToPlaylist({id:this.model.id,tracks:e}),[2]}})})},c["c"]([Object(l["b"])({default:function(){return{}}}),c["f"]("design:type","function"===typeof(n="undefined"!==typeof IPlaylistData&&IPlaylistData)?n:Object)],e.prototype,"model",void 0),c["c"]([Object(l["b"])({default:function(){return{}}}),c["f"]("design:type","function"===typeof(i="undefined"!==typeof Hash&&Hash)?i:Object)],e.prototype,"mods",void 0),c["c"]([Object(S["d"])("player"),c["f"]("design:type","function"===typeof(o="undefined"!==typeof IPlayerData&&IPlayerData)?o:Object)],e.prototype,"player",void 0),c["c"]([Object(S["b"])("Player::currentTrack"),c["f"]("design:type","function"===typeof(a="undefined"!==typeof ITrackData&&ITrackData)?a:Object)],e.prototype,"currentTrack",void 0),c["c"]([Object(S["a"])("createTrack"),c["f"]("design:type","function"===typeof(s="undefined"!==typeof MutationMethod&&MutationMethod)?s:Object)],e.prototype,"createTrack",void 0),c["c"]([Object(S["c"])("addTracksToPlaylist"),c["f"]("design:type","function"===typeof(r="undefined"!==typeof MutationMethod&&MutationMethod)?r:Object)],e.prototype,"addTracksToPlaylist",void 0),c["c"]([Object(S["c"])("removeTracksFromPlaylist"),c["f"]("design:type","function"===typeof(u="undefined"!==typeof MutationMethod&&MutationMethod)?u:Object)],e.prototype,"removeTracksFromPlaylist",void 0),c["c"]([Object(S["c"])("updateCursor"),c["f"]("design:type","function"===typeof(d="undefined"!==typeof MutationMethod&&MutationMethod)?d:Object)],e.prototype,"updateCursor",void 0),c["c"]([Object(S["c"])("updateActivePlaylist"),c["f"]("design:type","function"===typeof(f="undefined"!==typeof MutationMethod&&MutationMethod)?f:Object)],e.prototype,"updateActivePlaylist",void 0),e=c["c"]([Object(l["a"])({components:{Button:J,Track:Dt}})],e),e}(l["c"]),At=Ht,zt=At,Rt=(n("1dc3"),Object(y["a"])(zt,St,xt,!1,null,"4774c5bf",null));Rt.options.__file="playlist.vue";var $t=Rt.exports,It=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t._f("bemMods")(t.blockName,t.mods)},[n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"header"))},[t._l(t.playlists,function(e,i,o){return n("div",{key:i,class:t._f("bemMods")(t._f("bemElement")(t.blockName,"playlist-title"),{state:t.activePlaylistId===i?"active":"default"}),on:{click:function(n){t.setActivePlaylist(e)}}},[t.activePlaylistId===i?[t._v("\n        "+t._s(o)+".\n        "),n("span",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"playlist-title-input")),attrs:{contenteditable:"true"},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation(),e.preventDefault(),e.target.blur()},blur:t.updateTitle}},[t._v(t._s(e.name))]),n("Button",{attrs:{icon:"close",mods:{hover:"size"}},on:{click:function(n){n.stopPropagation(),n.preventDefault(),t.deleteExistPlaylist(e)}}})]:[t._v("\n        "+t._s(o)+".\n        "),n("span",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"playlist-title-input")),attrs:{contenteditable:"false"}},[t._v(t._s(e.name))])]],2)}),n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"playlist-title"),{type:"create"}),on:{click:t.focusSpan}},[n("Icon",{attrs:{name:"add",size:20}}),n("span",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"playlist-title-input")),attrs:{contenteditable:"true"},on:{focus:t.clearAddButtonText,blur:t.createNewPlaylist,keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation(),e.preventDefault(),e.target.blur()}}},[t._v("Add")])],1)],2),n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"body"))},[null!=t.openedPlaylist?n("Playlist",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"playlist")),attrs:{model:t.openedPlaylist}}):t._e()],1),n("div",{class:t._f("bemMods")(t._f("bemElement")(t.blockName,"footer"))})])},Ft=[],Vt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blockName="playlists",e.openedPlaylist=null,e}var n,i,o,a,s,r,u,d;return c["d"](e,t),Object.defineProperty(e.prototype,"activePlaylistId",{get:function(){return null!=this.openedPlaylist?this.openedPlaylist.id:null==this.player.activePlaylist?null:(this.openedPlaylist=this.player.activePlaylist,this.openedPlaylist.id)},enumerable:!0,configurable:!0}),e.prototype.setActivePlaylist=function(t){this.activePlaylistId!==t.id&&(this.openedPlaylist=t,null==this.player.activePlaylist&&this.updateActivePlaylist(t))},e.prototype.updateTitle=function(t){var e=t.target.textContent;this.player.activePlaylist.name!==e&&this.setTitleToPlaylist({id:this.activePlaylistId,title:e})},e.prototype.createNewPlaylist=function(t){return c["b"](this,void 0,void 0,function(){var e,n;return c["e"](this,function(i){switch(i.label){case 0:return e=t.target.textContent,t.target.textContent="Add",0===e.trim().length?[2]:[4,gt(this.createPlaylist,{title:e})];case 1:return n=i.sent(),this.setActivePlaylist(n),[2]}})})},e.prototype.deleteExistPlaylist=function(t){return c["b"](this,void 0,void 0,function(){var e;return c["e"](this,function(n){return this.deletePlaylist({id:t.id}),null!=this.player.activePlaylist&&this.player.activePlaylist.id===t.id&&(this.updateState("isStopped"),this.updateActivePlaylist(Object.values(this.playlists)[0])),this.activePlaylistId===t.id&&(e=this.player.activePlaylist||Object.values(this.playlists)[0],null!=e?this.setActivePlaylist(e):this.openedPlaylist=null),[2]})})},e.prototype.clearAddButtonText=function(t){requestAnimationFrame(function(){t.target.textContent=""})},e.prototype.focusSpan=function(t){t.currentTarget.lastElementChild.focus()},c["c"]([Object(l["b"])({default:function(){return{}}}),c["f"]("design:type","function"===typeof(n="undefined"!==typeof Hash&&Hash)?n:Object)],e.prototype,"mods",void 0),c["c"]([Object(S["d"])("player"),c["f"]("design:type","function"===typeof(i="undefined"!==typeof IPlayerData&&IPlayerData)?i:Object)],e.prototype,"player",void 0),c["c"]([Object(S["d"])("playlists"),c["f"]("design:type","function"===typeof(o="undefined"!==typeof IPlaylistCollection&&IPlaylistCollection)?o:Object)],e.prototype,"playlists",void 0),c["c"]([Object(S["c"])("setTitleToPlaylist"),c["f"]("design:type","function"===typeof(a="undefined"!==typeof MutationMethod&&MutationMethod)?a:Object)],e.prototype,"setTitleToPlaylist",void 0),c["c"]([Object(S["c"])("createPlaylist"),c["f"]("design:type","function"===typeof(s="undefined"!==typeof MutationMethod&&MutationMethod)?s:Object)],e.prototype,"createPlaylist",void 0),c["c"]([Object(S["c"])("deletePlaylist"),c["f"]("design:type","function"===typeof(r="undefined"!==typeof MutationMethod&&MutationMethod)?r:Object)],e.prototype,"deletePlaylist",void 0),c["c"]([Object(S["c"])("updateActivePlaylist"),c["f"]("design:type","function"===typeof(u="undefined"!==typeof MutationMethod&&MutationMethod)?u:Object)],e.prototype,"updateActivePlaylist",void 0),c["c"]([Object(S["c"])("updateState"),c["f"]("design:type","function"===typeof(d="undefined"!==typeof MutationMethod&&MutationMethod)?d:Object)],e.prototype,"updateState",void 0),e=c["c"]([Object(l["a"])({components:{Button:J,Icon:I,Playlist:$t}})],e),e}(l["c"]),qt=Vt,Wt=qt,Ut=(n("c680"),Object(y["a"])(Wt,It,Ft,!1,null,"15bfccb0",null));Ut.options.__file="playlists.vue";var Gt=Ut.exports,Jt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blockName="app",e}return c["d"](e,t),e.prototype.pass=function(){},e=c["c"]([Object(l["a"])({components:{Layout:B,Header:b,Footer:P}})],e),e}(l["c"]),Yt=Jt,Kt=Yt,Xt=(n("7faf"),Object(y["a"])(Kt,s,r,!1,null,null,null));Xt.options.__file="App.vue";var Qt=Xt.exports,Zt=n("8c4f"),te=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.blockName},[n("Player"),n("Playlists")],1)},ee=[],ne=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blockName="home-page",e.ready=!1,e}return c["d"](e,t),e=c["c"]([Object(l["a"])({components:{Player:Tt,Playlists:Gt}})],e),e}(l["c"]),ie=ne,oe=ie,ae=(n("d5c6"),Object(y["a"])(oe,te,ee,!1,null,"cdd5e294",null));ae.options.__file="home.vue";var se=ae.exports,re=function(t,e){return void 0===e&&(e="home"),{path:t,name:e,component:se}},ce=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},le=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"about"},[n("h1",[t._v("This is an about page")])])}],ue={},de=Object(y["a"])(ue,ce,le,!1,null,null,null);de.options.__file="about.vue";var fe=de.exports,pe=function(t,e){return void 0===e&&(e="about"),{path:t,name:e,component:fe}};i["default"].use(Zt["a"]);var he,ye=new Zt["a"]({base:"/Vue-Player/",mode:"history",routes:[re("/","home"),pe("/about","about")]}),ve=n("2f62"),be=console.log,me={createTrack:function(t,e){t.state;var n=t.commit,i=(t.dispatch,e.file),o=e.defer,a=void 0===o?{}:o;return c["b"](this,void 0,void 0,function(){var t,e,o;return c["e"](this,function(s){switch(s.label){case 0:return be("Track::Mutation:create - arg file",i),t={id:mt(),name:i.name.replace(/^(.*)\..{1,5}$/gi,"$1"),type:i.type.replace(/^.*\//,""),size:i.size,source:URL.createObjectURL(i),duration:0,sampleRate:44.1,bitrate:0,originFile:i,relatedPlaylists:[]},be("Track::Mutation:create - track",t),e=document.createElement("audio"),e.preload="metadata",o=t,[4,new Promise(function(n){e.addEventListener("durationchange",function(){n(Math.round(e.duration))}),e.src=t.source})];case 1:return o.duration=s.sent(),t.bitrate=Math.round(t.size/1024*8/t.duration),n("setTrack",{track:t}),null!=a.resolve&&a.resolve(t),[2]}})})}},ge=c["a"]({},me),ke=(he={},he["Player::currentTrack"]=function(t){return kt(t,"player.activePlaylist.cursor.data",null)},he),_e=c["a"]({},ke),Me={updateActivePlaylist:function(t,e){t.player.activePlaylist=e},playingTick:function(t,e){t.player.currentSecond=Math.round(e)},updateCacheProgress:function(t,e){t.player.cachedSeconds=e},updateVolume:function(t,e){t.player.volume=e},toggleShuffleMode:function(t){t.player.isShuffle=!t.player.isShuffle},nextRepeatMode:function(t){++t.player.isRepeat,t.player.isRepeat>=3&&(t.player.isRepeat=0)},updateState:function(t,e){t.player.status=e}},Oe=function(t,e){var n={first:null,last:null},o=0,a=0,s=t.reduce(function(t,n,s){n.relatedPlaylists.push(e);var r={prev:null,next:null,data:n};return o+=n.size,a+=n.duration,null===t.first?(i["default"].set(t,"last",r),i["default"].set(t,"first",r)):(i["default"].set(r,"prev",t.last),i["default"].set(t.last,"next",r),i["default"].set(t,"last",r)),t},n);return e.size=o,e.duration=a,s},Pe={createPlaylist:function(t,e){var n=e.title,o=e.tracks,a=void 0===o?[]:o,s=e.defer,r=void 0===s?{}:s,c={trackList:{first:null,last:null},id:mt(),name:n,size:0,count:a.length,duration:0,cursor:null};i["default"].set(c,"trackList",Oe(a,c)),i["default"].set(t.playlists,c.id,c),null!=r.resolve&&r.resolve(c)},deletePlaylist:function(t,e){var n=e.id,o=e.defer,a=void 0===o?{}:o;i["default"].delete(t.playlists,n),null!=a.resolve&&a.resolve()},setTitleToPlaylist:function(t,e){var n=e.id,o=e.title,a=e.defer,s=void 0===a?{}:a,r=t.playlists[n];i["default"].set(r,"name",o),null!=s.resolve&&s.resolve(r)},addTracksToPlaylist:function(t,e){for(var n=e.id,o=e.tracks,a=void 0===o?[]:o,s=e.defer,r=void 0===s?{}:s,c=t.playlists[n],l=0,u=a;l<u.length;l++){var d=u[l];d.relatedPlaylists.push(c);var f={prev:null,next:null,data:d};c.size+=d.size,c.duration+=d.duration,null==c.trackList.first?(i["default"].set(c.trackList,"last",f),i["default"].set(c.trackList,"first",f)):(i["default"].set(f,"prev",c.trackList.last),i["default"].set(c.trackList.last,"next",f),i["default"].set(c.trackList,"last",f))}i["default"].set(c,"count",c.count+a.length),null!=r.resolve&&r.resolve(c)},removeTracksFromPlaylist:function(t,e){var n=e.id,o=e.node,a=e.defer,s=void 0===a?{}:a,r=t.playlists[n];null!=o.prev?i["default"].set(o.prev,"next",o.next):r.trackList.first=o.next,null!=o.next?i["default"].set(o.next,"prev",o.prev):r.trackList.last=o.prev,i["default"].set(r,"size",r.size-o.data.size),i["default"].set(r,"duration",r.duration-o.data.duration),i["default"].set(r,"count",r.count-1),null!=s.resolve&&s.resolve()},getNextTrack:function(t,e){var n=e.id,i=e.isRepeatList,o=void 0!==i&&i,a=e.isRandom,s=void 0!==a&&a,r=e.defer,c=void 0===r?{}:r,l=t.playlists[n];if(null==l.cursor)l.cursor=l.trackList.first;else if(s){for(var u=l.cursor,d=_t(1,l.count);d>0;--d)u=u.next,null==u&&(u=l.trackList.first);l.cursor=u}else l.cursor=l.cursor.next;if(null==l.cursor){if(!o)return l.cursor=l.trackList.last,void(null!=c.resolve&&c.resolve(null));l.cursor=l.trackList.first}null!=c.resolve&&c.resolve(l.cursor&&l.cursor.data)},getPrevTrack:function(t,e){var n=e.id,i=e.isRepeatList,o=void 0!==i&&i,a=e.isRandom,s=void 0!==a&&a,r=e.defer,c=void 0===r?{}:r,l=t.playlists[n];if(null==l.cursor)l.cursor=l.trackList.last;else if(s){for(var u=l.cursor,d=_t(1,l.count);d>0;--d)u=u.prev,null==u&&(u=l.trackList.last);l.cursor=u}else l.cursor=l.cursor.prev;null==l.cursor&&(l.cursor=o?l.trackList.last:l.trackList.first),null!=c.resolve&&c.resolve(l.cursor&&l.cursor.data)},updateCursor:function(t,e){var n=e.id,i=e.node,o=e.defer,a=void 0===o?{}:o,s=t.playlists[n];s.cursor=i,null!=a.resolve&&a.resolve(s.cursor&&s.cursor.data)}},je={setTrack:function(t,e){var n=e.track,o=e.defer,a=void 0===o?{}:o;i["default"].set(t.tracks,n.id,n),null!=a.resolve&&a.resolve(n)},patchTrack:function(t,e){for(var n=e.id,i=e.data,o=e.defer,a=void 0===o?{}:o,s=t.tracks[n],r=0,c=Object.entries(i);r<c.length;r++){var l=c[r],u=l[0],d=l[1];s[u]=d}null!=a.resolve&&a.resolve(s)}},Te=c["a"]({},Me,je,Pe),Se={track:null,activePlaylist:null,currentSecond:0,cachedSeconds:0,volume:1,isShuffle:!1,isRepeat:0,status:"isDataWaiting"},xe={},Ne={},Ee={player:Se,tracks:Ne,playlists:xe};i["default"].use(ve["a"]);var we=new ve["a"].Store({state:Ee,getters:_e,mutations:Te,actions:ge}),Le=function(t,e,n){var i=""+t+(e&&"__"+e||"");return null==n?i:Object.entries(n).reduce(function(t){var e=t[0],n=t[1];return"@"===n?i+"--"+e:i+"--"+e+"-"+n},[i]).join(" ")},Ce=function(t,e){return null==e?t:t+"__"+e},Be=function(t,e){return null==e?t:Object.entries(e).reduce(function(e,n){var i=n[0],o=n[1];return"@"===o?t+"--"+i:(e.push(t+"--"+i+"-"+o),e)},[t]).join(" ")},De=function(t,e,n){var i={h:0,m:0,s:0,ms:0};switch(e){case"h":i.d=Math.trunc(t/24),i.h=t-24*i.d;break;case"m":i.d=Math.trunc(t/60/24),i.h=Math.trunc(t/60-24*i.d),i.m=t-24*i.d*60-60*i.h;break;case"s":i.d=Math.trunc(t/60/60/24),i.h=Math.trunc(t/60/60-24*i.d),i.m=Math.trunc(t/60-24*i.d*60-60*i.h),i.s=t-24*i.d*60*60-60*i.h*60-60*i.m;break;default:i.d=Math.trunc(t/1e3/60/60/24),i.h=Math.trunc(t/1e3/60/60-24*i.d),i.m=Math.trunc(t/1e3/60-24*i.d*60-60*i.h),i.s=Math.trunc(t/1e3-24*i.d*60*60-60*i.h*60-60*i.m),i.ms=t%1e3}switch(n){case"DD:HH:MM:SS":return(i.d>0?i.d.toString().padStart(2,"0"):"00")+":"+(i.h>0?i.h.toString().padStart(2,"0"):"00")+":"+(i.m>0?i.m.toString().padStart(2,"0"):"00")+":"+(i.s>0?i.s.toString().padStart(2,"0"):"00");case"HH:MM:SS":return(i.h>0?i.h.toString().padStart(2,"0"):"00")+":"+(i.m>0?i.m.toString().padStart(2,"0"):"00")+":"+(i.s>0?i.s.toString().padStart(2,"0"):"00");case"MM:SS":return(i.m>0?i.m.toString().padStart(2,"0"):"00")+":"+(i.s>0?i.s.toString().padStart(2,"0"):"00");case"SS":return""+(i.s>0?i.s.toString().padStart(2,"0"):"00")}},He=["b","Kb","Mb","Gb","Tb","Pb"],Ae=function(t,e,n){void 0===e&&(e="b"),void 0===n&&(n="auto");var i=t,o=He.indexOf(e);if("auto"===n)while(i>1023)++o,i/=1024;else{var a=He.indexOf(e);while(o<a)++o,i/=1024}return i.toFixed(2)+" "+He[o]};i["default"].filter("bem",Le),i["default"].filter("bemElement",Ce),i["default"].filter("bemMods",Be),i["default"].filter("duration",De),i["default"].filter("fileSize",Ae),i["default"].config.productionTip=!1,i["default"].use(a.a,{id:"UA-126186232-1",router:ye}),new i["default"]({router:ye,store:we,render:function(t){return t(Qt)}}).$mount("#app")},d5c6:function(t,e,n){"use strict";var i=n("331a"),o=n.n(i);o.a},e3db:function(t,e,n){"use strict";var i=n("5f57"),o=n.n(i);o.a},fd29:function(t,e,n){"use strict";var i=n("8db2"),o=n.n(i);o.a}});
//# sourceMappingURL=app.20a15df8.js.map